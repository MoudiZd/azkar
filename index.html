<!DOCTYPE html>
<html lang="ar" dir="rtl" data-bs-theme="light" class="bg-gradient">
<head>
  <meta charset="UTF-8">
  <title>تطبيق الأذكار اليومية</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="/icon.png"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="p-3 bg-gradient">
  <h3 class="text-center fixed-top bg-success bg-gradient m-0 p-3 text-light">تطبيق الأذكار اليومية</h3>
  <div class="container mt-5">
    <div class="mb-2 py-3 fw-bold">
      تاريخ اليوم : (<span id="hijri-date"></span>)
    </div>
    <div class="d-flex justify-content-between mb-3 gap-2 pb-3">
      <button class="btn btn-success d-flex flex-column justify-content-between" data-bs-toggle="modal" data-bs-target="#addModal" style="flex:1;"><i class="bi bi-journal-plus"></i> إضافة ذكر</button>
      <button class="btn btn-secondary d-flex flex-column justify-content-between" onclick="exportItem()" style="flex: 1;"><i class="bi bi-file-earmark-arrow-up"></i>استخراج الاذكار </button>
      <input type="file" class="d-none" id="fileInput" onchange="importItem();"/>
      <label for="fileInput" class="btn btn-info d-flex flex-column justify-content-between" style="flex: 1;"><i class="bi bi-file-earmark-arrow-down"></i> استيراد الاذكار</label>
      <button class="btn btn-primary d-flex flex-column justify-content-between" data-bs-toggle="modal" data-bs-target="#settingsModal" style="flex: 1;"><i class="bi bi-gear"></i> الإعدادات</button>
    </div>

    <div id="sections">
      <div>
        <div class="section-header border bg-dark-subtle text-light-subtle" data-bs-toggle="collapse" data-bs-target="#day-section">أذكار مرتبطة باليوم الحالي (<span id="today-name"></span>)</div>
        <div id="day-section" class="collapse show"></div>
      </div>
      <div>
        <div class="section-header border bg-dark-subtle text-light-subtle" data-bs-toggle="collapse" data-bs-target="#month-section">أذكار مرتبطة بالشهر الهجري الحالي (<span id="month-name"></span>)</div>
        <div id="month-section" class="collapse show"></div>
      </div>
      <div>
        <div class="section-header border bg-dark-subtle text-light-subtle" data-bs-toggle="collapse" data-bs-target="#general-section">أذكار عامة</div>
        <div id="general-section" class="collapse show"></div>
      </div>
    </div>

    <div id="repeat-page" style="display:none">
      <button class="btn p-2" onclick="backToHome()"><i class="bi bi-caret-right align-middle"></i> رجوع</button>
      <h5 class="mt-3 fw-bold text-center">تكرار الذكر: <span id="repeat-title"></span></h5>
      <div id="repeated-sentences" class="mt-3 pb-5"></div>
      <div class="fixed-bottom d-flex bg-secondary bg-gradient bg-opacity-50 shadow-sm justify-content-center py-2">
      <button class="btn btn-light p-2" onclick="backToHome()"><i class="bi bi-caret-right align-middle"></i> رجوع</button>
      </div>
    </div>
  </div>

  <!-- Modal: Add -->
  <div class="modal fade" id="addModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">إضافة ذكر</h5></div>
        <div class="modal-body">
          <div class="mb-2">
            <input type="text" id="sentence-title" placeholder="عنوان الذكر" class="form-control border" onblur="if(!$('#sentence-text').val()){$('#sentence-text').val($(this).val());}">
          </div>
          <div class="mb-2">
            <textarea id="sentence-pretext" placeholder="جملة ثابتة قبل الذكر" class="form-control border"></textarea>
          </div>
          <div class="mb-2">
            <textarea id="sentence-text" placeholder="نص الذكر" class="form-control border"></textarea>
          </div>
          <div class="mb-2">
            <textarea id="sentence-after-text" placeholder="جملة ثابتة بعد الذكر" class="form-control border"></textarea>
          </div>
          <div class="mb-2">
            <input type="number" id="sentence-count" placeholder="عدد التكرار" class="form-control border">
          </div>
          <div class="mb-2">
            <select class="form-select" id="sentence-mode">
              <option value="" disabled selected>اختر طريقة عرض الذكر</option>
              <option value="repeat">تكرار الذكر</option>
              <option value="counter">عداد</option>
            </select>
          </div>
          <div class="mb-2">
            <select id="sentence-type" class="form-select border">
              <option value="دعاء">دعاء</option>
              <option value="صلاة">صلاة</option>
              <option value="عمل">عمل</option>
              <option value="ذكر">ذكر</option>
              <option value="أخرى">أخرى</option>
            </select>
          </div>
          <div class="mb-2">
            <select id="sentence-day" class="form-select border">
              <option value="">اختر اسم اليوم (اختياري)</option>
              <option value="الأحد">الأحد</option>
              <option value="الاثنين">الإثنين</option>
              <option value="الثلاثاء">الثلاثاء</option>
              <option value="الأربعاء">الأربعاء</option>
              <option value="الخميس">الخميس</option>
              <option value="الجمعة">الجمعة</option>
              <option value="السبت">السبت</option>
            </select>
          </div>
          <div class="mb-2">
            <select id="sentence-month" class="form-select border">
              <option value="">اختر اسم الشهر الهجري (اختياري)</option>
              <option value="محرم">محرم</option>
              <option value="صفر">صفر</option>
              <option value="ربيع الأول">ربيع الأول</option>
              <option value="ربيع الآخر">ربيع الآخر</option>
              <option value="جمادى الأولى">جمادى الأولى</option>
              <option value="جمادى الآخرة">جمادى الآخرة</option>
              <option value="رجب">رجب</option>
              <option value="شعبان">شعبان</option>
              <option value="رمضان">رمضان</option>
              <option value="شوال">شوال</option>
              <option value="ذو القعدة">ذو القعدة</option>
              <option value="ذو الحجة">ذو الحجة</option>
            </select>
          </div>
          <div class="mb-2">
            <input type="number" id="sentence-daynum" class="form-control border" placeholder="رقم اليوم الهجري (اختياري)">
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" onclick="addSentence()">حفظ</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Settings -->
  <div class="modal fade" id="settingsModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">الإعدادات</h5></div>
        <div class="modal-body">
          <div class="mb-2">
            <label class="form-label">عند الضغط على الذكر:</label>
            <select id="click-behavior" class="form-select border">
              <option value="hide">إخفاء الذكر</option>
              <option value="strike">تشطيب الذكر</option>
              <option value="remove">إزالة الذكر</option>
            </select>
          </div>
          <div class="mb-2">
            <label class="form-label">نظام الالوان</label>
            <select id="theme" class="form-select border">
              <option value="light">نهاري</option>
              <option value="dark">ليلي</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" onclick="saveSettings()">حفظ</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
        </div>
      </div>
    </div>
  </div>

    <!-- Modal: Add -->
  <div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">تعديل ذكر</h5></div>
        <div class="modal-body">
          <input type="text" id="edited-sentence-title" placeholder="عنوان الذكر" class="form-control mb-2">
          <textarea id="edited-sentence-pretext" placeholder="جملة ثابتة قبل الذكر" class="form-control mb-2"></textarea>
          <textarea id="edited-sentence-text" placeholder="نص الذكر" class="form-control mb-2"></textarea>
          <textarea id="edited-sentence-after-text" placeholder="جملة ثابتة بعد الذكر" class="form-control mb-2"></textarea>
          <input type="number" id="edited-sentence-count" placeholder="عدد التكرار" class="form-control mb-2">
          <div class="mb-2">
            <select class="form-select" id="edited-sentence-mode">
              <option value="" disabled selected>اختر طريقة عرض الذكر</option>
              <option value="repeat">تكرار الذكر</option>
              <option value="counter">عداد</option>
            </select>
          </div>
          <select id="edited-sentence-type" class="form-select mb-2">
            <option value="دعاء">دعاء</option>
            <option value="صلاة">صلاة</option>
            <option value="عمل">عمل</option>
  <option value="ذكر">
ذكر</option>
            <option value="أخرى">أخرى</option>
          </select>
          <select id="edited-sentence-day" class="form-select mb-2">
            <option value="">اختر اسم اليوم (اختياري)</option>
            <option value="الأحد">الأحد</option>
            <option value="الاثنين">الإثنين</option>
            <option value="الثلاثاء">الثلاثاء</option>
            <option value="الأربعاء">الأربعاء</option>
            <option value="الخميس">الخميس</option>
            <option value="الجمعة">الجمعة</option>
            <option value="السبت">السبت</option>
          </select>
          <select id="edited-sentence-month" class="form-select mb-2">
            <option value="">اختر اسم الشهر الهجري (اختياري)</option>
            <option value="محرم">محرم</option>
            <option value="صفر">صفر</option>
            <option value="ربيع الأول">ربيع الأول</option>
            <option value="ربيع الآخر">ربيع الآخر</option>
            <option value="جمادى الأولى">جمادى الأولى</option>
            <option value="جمادى الآخرة">جمادى الآخرة</option>
            <option value="رجب">رجب</option>
            <option value="شعبان">شعبان</option>
            <option value="رمضان">رمضان</option>
            <option value="شوال">شوال</option>
            <option value="ذو القعدة">ذو القعدة</option>
            <option value="ذو الحجة">ذو الحجة</option>
          </select>
          <input type="number" id="edited-sentence-daynum" class="form-control mb-2" placeholder="رقم اليوم الهجري (اختياري)">
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" onclick="editSentence()">حفظ</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
          <input id="edited-sentence-index" type="hidden" />
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/moment-hijri@2.1.2/build/moment-hijri.js"></script>
  <script src="scripts.js?v=4"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log('Service Worker Registered'));
    }
  </script>
</body>
</html>
